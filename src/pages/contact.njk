---
layout : 'base.njk'
title : "PlumbLab | Contact Us"

heroImgSrc: "/assets/about.jpg"
heroImgAlt: "HomePageHeroImg"
eleventyComputed:
 heroTitle: "{{ title }}"

map_src : "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d197214.4195069445!2d-83.13986550453077!3d40.00966954536853!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x883889c1b990de71%3A0xe43266f8cfb1b533!2sColumbus%2C%20OH%2C%20USA!5e0!3m2!1sen!2sin!4v1730267760527!5m2!1sen!2sin"
---




<!-- hero section -->
{% include "_layouts/heroSection.njk" %}


<!-- contactus -->

<!-- Container -->

<section class="grid grid-cols-1 lg:grid-cols-2 h-screen" id="contactus">

    <!-- Form Section -->
    <div class="bg-gray-900 p-8 px-4 md:px-14 flex flex-col justify-center h-full">
        <h2 class="text-sm font-semibold text-[var(--textGray)]">BOOK ONLINE</h2>
        <h1 class="text-3xl font-bold text-[var(--colorWhite)] mb-6">Online Booking For Appointments.</h1>

        <!-- Form -->
        <form class="space-y-4" method="POST" id="contact-form">

            <!-- Full Name and Email -->
            <div class="flex flex-col md:flex-row md:space-x-4">
                <div class="w-full mb-4 md:mb-0">
                    <label class="block text-[var(--textGray)] text-sm mb-1">Full name here*</label>
                    <input type="text" placeholder="Ross Ward" id="name" name="name" required
                        class="w-full px-4 py-2 bg-gray-800 rounded-lg text-[var(--colorWhite)] focus:outline-none focus:ring-2 focus:ring-[var(--primaryColor)]">
                </div>
                <div class="w-full">
                    <label class="block text-[var(--textGray)] text-sm mb-1">Email here*</label>
                    <input type="email" placeholder="rossward@gmail.com" id="email" name="email" required
                        class="w-full px-4 py-2 bg-gray-800 rounded-lg text-[var(--colorWhite)] focus:outline-none focus:ring-2 focus:ring-[var(--primaryColor)]">
                </div>
            </div>

            <!-- Contact Number and Select Service -->
            <div class="flex flex-col md:flex-row md:space-x-4">
                <div class="w-full mb-4 md:mb-0">
                    <label class="block text-[var(--textGray)] text-sm mb-1">Contact number*</label>
                    <input type="tel" placeholder="+88 *** *** ***" id="contact" name="contact"
                        class="w-full px-4 py-2 bg-gray-800 rounded-lg text-[var(--colorWhite)] focus:outline-none focus:ring-2 focus:ring-[var(--primaryColor)]">
                </div>
                <div class="w-full">
                    <label class="block text-[var(--textGray)] text-sm mb-1">Select service*</label>
                    <select
                        class="w-full px-4 py-2 bg-gray-800 rounded-lg text-[var(--colorWhite)] focus:outline-none focus:ring-2 focus:ring-[var(--primaryColor)]">
                        <option>Subject</option>
                        {% for service in collections.services %}
                        <option>{{service.data.title}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- Short Text -->
            <div>
                <label class="block text-[var(--textGray)] text-sm mb-1">Short text*</label>
                <textarea placeholder="Type your message" id="message" name="message" required
                    class="w-full px-4 py-2 bg-gray-800 rounded-lg text-[var(--colorWhite)] focus:outline-none focus:ring-2 focus:ring-[var(--primaryColor)] h-32"></textarea>
            </div>

            <div id="responseMessage" class=" rounded-lg px-4 py-2 text-white text-xl"></div>

            <!-- Submit Button -->
            <button type="submit"
                class="w-full bg-[var(--primaryColor)] hover:bg-[var(--primaryColorHover)] text-[var(--colorWhite)] font-semibold py-3 rounded-lg mt-4">
                Get An Appointment
            </button>
        </form>
    </div>

    <!-- Image Section -->
    <div class="h-full hidden lg:block " id="contactusform-img">
        <img src="/assets/callus.avif" alt="Contact Us" class="w-full h-full object-cover">
    </div>

</section>




<!-- Map -->
{% include "_layouts/map.njk" %}


<script>
    document.getElementById('contact-form').addEventListener('submit', async function (event) {
        event.preventDefault();

        const formData = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            message: document.getElementById('message').value,
            service: document.getElementById('service').value,
            contact: document.getElementById('contact').value,
        };

        const responseMessage = document.getElementById('responseMessage');

        try {
            const response = await fetch('/api/send-email', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData),
            });

            const result = await response.json();
            console.log(result);


            // Show success or error message
            responseMessage.innerText = result.message || 'An error occurred.';
            responseMessage.style.display = 'block';

            if (result.statusCode != 200) {
                responseMessage.classList.add('error')
            } else {
                responseMessage.classList.add('success'); // Add success styling
            }


            if (response.ok) {
                // Reset the form after a successful submission
                document.getElementById('contact-form').reset();
            }
        } catch (error) {
            responseMessage.innerText = 'An error occurred while sending the email.';
            responseMessage.style.display = 'block';
            responseMessage.classList.add('error'); // Add error styling
        }

        // Automatically hide the message after 5 seconds
        setTimeout(() => {
            responseMessage.style.display = 'none';
            responseMessage.classList.remove('success', 'error'); // Remove styling classes
        }, 5000);
    });
</script>